<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>æ±Ÿæ½‡æ–°å¹´å¿«ä¹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 50%, #ff6b8b 100%);
            background-size: 400% 400%; /* æ¸å˜åŠ¨æ•ˆåŸºç¡€ */
            font-family: "Microsoft YaHei", "Heiti SC", sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            animation: bgGradient 15s ease infinite; /* èƒŒæ™¯æ¸å˜åŠ¨ç”» */
        }

        /* èƒŒæ™¯æ¸å˜åŠ¨ç”» */
        @keyframes bgGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* é›ªèŠ±æ ·å¼ï¼ˆä¸è§„åˆ™é›ªèŠ±å½¢çŠ¶ï¼‰ */
        .snowflake {
            position: absolute;
            top: -10px;
            z-index: 1;
            pointer-events: none; /* é¿å…é®æŒ¡äº¤äº’ */
            opacity: 0.8;
            /* ä¸è§„åˆ™é›ªèŠ±å½¢çŠ¶ */
            clip-path: polygon(
                50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%,
                21% 91%, 32% 57%, 2% 35%, 39% 35%
            );
        }

        /* çˆ±å¿ƒæ ·å¼ - å‘ä¸Šæµ®åŠ¨ï¼ˆçº¯çˆ±å¿ƒå½¢çŠ¶ï¼Œç‹¬ç«‹æ ·å¼ï¼‰ */
        .heart {
            position: absolute;
            bottom: -10px;
            z-index: 1;
            pointer-events: none;
            opacity: 0.9;
            /* æ ‡å‡†çˆ±å¿ƒå½¢çŠ¶ */
            width: 15px;
            height: 15px;
            background: #ff6b8b;
            transform: rotate(45deg);
            animation: heartRise linear infinite;
        }
        /* çˆ±å¿ƒä¼ªå…ƒç´ å®Œæˆå¿ƒå½¢ */
        .heart::before, .heart::after {
            content: "";
            position: absolute;
            width: 15px;
            height: 15px;
            background: #ff6b8b;
            border-radius: 50%;
        }
        .heart::before {
            top: -7.5px;
            left: 0;
        }
        .heart::after {
            top: 0;
            left: -7.5px;
        }

        @keyframes heartRise {
            from { 
                transform: rotate(45deg) translateY(0) scale(1); 
                opacity: 0.9;
            }
            to { 
                transform: rotate(45deg) translateY(-100vh) scale(0.5); 
                opacity: 0;
            }
        }

        /* ç¤¼èŠ±ç‰¹æ•ˆæ ·å¼ï¼ˆä¼˜åŒ–æ€§èƒ½+å±‚æ¬¡æ„Ÿï¼‰ */
        .firework {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            z-index: 3;
            animation: firework 1s ease-out forwards;
            pointer-events: none;
            box-shadow: 0 0 10px currentColor; /* å…‰æ™•æ•ˆæœ */
            color: inherit;
            background: currentColor;
        }
        @keyframes firework {
            0% { transform: scale(1); opacity: 1; }
            70% { transform: scale(4); opacity: 0.5; }
            100% { transform: scale(5); opacity: 0; }
        }

        /* ä¸»å®¹å™¨ï¼šç»å¯¹å±…ä¸­ï¼ŒåŒ…è£¹æ‰€æœ‰å†…å®¹ */
        .main-box {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            width: 100%;
            padding: 0 15px; /* é¿å…å°å±æº¢å‡º */
        }

        /* ç¥ç¦å¡ç‰‡æ ·å¼ï¼ˆå¢å¼ºåŠ¨æ•ˆ+è´¨æ„Ÿï¼‰ */
        .blessing-card {
            width: 100%;
            max-width: 500px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px 30px;
            box-shadow: 0 10px 30px rgba(255, 107, 139, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.8) inset;
            text-align: center;
            animation: cardFloat 3s ease-in-out infinite alternate, cardGlow 6s ease-in-out infinite; /* æ–°å¢å…‰æ™• */
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px); /* æ¯›ç»ç’ƒæ•ˆæœ */
        }
        @keyframes cardFloat {
            from { transform: translateY(0px); }
            to { transform: translateY(-10px); }
        }
        @keyframes cardGlow {
            0%, 100% { box-shadow: 0 10px 30px rgba(255, 107, 139, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.8) inset; }
            50% { box-shadow: 0 10px 40px rgba(255, 107, 139, 0.5), 0 0 10px rgba(255, 107, 139, 0.2) inset; }
        }

        /* å¡ç‰‡æ–‡å­—æ ·å¼ï¼ˆå¢å¼ºæ–°å¹´æ°›å›´ï¼‰ */
        .card-title {
            color: #d43f3a;
            font-size: 28px;
            margin-bottom: 20px;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(212, 63, 58, 0.2);
            animation: titlePulse 2s ease-in-out infinite alternate;
        }
        @keyframes titlePulse {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }
        .friend-name {
            color: #ff6b8b;
            font-size: 24px;
            margin-bottom: 25px;
            font-weight: 500;
            position: relative;
            display: inline-block;
        }
        .friend-name::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #ff6b8b, transparent);
            animation: nameLine 3s ease-in-out infinite;
        }
        @keyframes nameLine {
            0%, 100% { width: 0; left: 50%; }
            50% { width: 100%; left: 0; }
        }
        .blessing-content {
            color: #333;
            font-size: 18px;
            line-height: 1.8;
            margin-bottom: 30px;
            text-align: left; /* ä¼˜åŒ–é˜…è¯»ä½“éªŒ */
            padding: 0 10px;
        }
        .lantern-icon {
            font-size: 30px;
            color: #d43f3a;
            margin: 0 10px;
            animation: lanternSwing 2s ease-in-out infinite alternate;
        }
        @keyframes lanternSwing {
            from { transform: rotate(-5deg); }
            to { transform: rotate(5deg); }
        }

        /* å¼€å§‹ç­”é¢˜æŒ‰é’®ï¼ˆå¢å¼ºåŠ¨æ•ˆ+åé¦ˆï¼‰ */
        .start-btn {
            padding: 12px 40px;
            background: linear-gradient(90deg, #d43f3a, #ff6b8b);
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 18px;
            font-weight: 500;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(212, 63, 58, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .start-btn::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: all 0.5s ease;
        }
        .start-btn:hover {
            background: linear-gradient(90deg, #c22822, #ff4767);
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(212, 63, 58, 0.4);
        }
        .start-btn:hover::before {
            left: 100%;
        }

        /* ç­”é¢˜åŒºåŸŸæ ·å¼ï¼šå¢å¼ºè´¨æ„Ÿ+ä¼˜åŒ–åŠ¨ç”» */
        .quiz-box {
            width: 100%;
            max-width: 500px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px 30px;
            box-shadow: 0 10px 30px rgba(255, 107, 139, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.8) inset;
            text-align: center;
            display: none;
            position: relative;
            backdrop-filter: blur(5px);
            transform: translateY(20px); /* å…¥åœºåŠ¨ç”»åŸºç¡€ */
            opacity: 0;
            transition: all 0.5s ease;
        }
        .quiz-box.show {
            transform: translateY(0);
            opacity: 1;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0) translateY(0); }
            25% { transform: translateX(-8px) translateY(2px); }
            75% { transform: translateX(8px) translateY(-2px); }
        }
        .quiz-box.shake {
            animation: shake 0.3s ease-in-out;
        }
        .quiz-question {
            color: #d43f3a;
            font-size: 22px;
            margin-bottom: 30px;
            font-weight: 600;
            line-height: 1.5;
            text-shadow: 0 1px 2px rgba(212, 63, 58, 0.1);
        }
        /* æ–‡æœ¬è¾“å…¥æ¡†æ ·å¼ */
        .quiz-input {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid #ff6b8b;
            border-radius: 15px;
            font-size: 17px;
            margin-bottom: 20px;
            outline: none;
            transition: all 0.2s ease;
        }
        .quiz-input:focus {
            border-color: #d43f3a;
            box-shadow: 0 0 8px rgba(255, 107, 139, 0.2);
        }
        .submit-btn {
            padding: 10px 30px;
            background: linear-gradient(90deg, #d43f3a, #ff6b8b);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 17px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .submit-btn:hover {
            background: linear-gradient(90deg, #c22822, #ff4767);
            transform: scale(1.05);
        }
        .quiz-tip {
            margin-top: 20px;
            color: #ff6b8b;
            font-size: 15px;
            display: none;
            animation: tipFade 0.3s ease-in-out;
        }
        @keyframes tipFade {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* æç¤ºå†…å®¹æ ·å¼ */
        .hint-content {
            margin-top: 15px;
            display: none;
            animation: tipFade 0.3s ease-in-out;
        }
        .hint-img {
            max-width: 200px;
            border-radius: 10px;
            margin: 10px auto;
        }
        .hint-qrcode {
            max-width: 150px;
            border-radius: 10px;
            margin: 10px auto;
        }
        .hint-audio {
            margin: 10px auto;
            width: 100%;
            max-width: 300px;
        }

        /* äºŒç»´ç /å›¾ç‰‡å±•ç¤ºåŒºï¼ˆå¢å¼ºå…¥åœºåŠ¨æ•ˆï¼‰ */
        .qrcode-box {
            width: 100%;
            max-width: 500px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px 30px;
            box-shadow: 0 10px 30px rgba(255, 107, 139, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.8) inset;
            text-align: center;
            display: none;
            backdrop-filter: blur(5px);
            transform: scale(0.9);
            opacity: 0;
            transition: all 0.6s ease;
        }
        .qrcode-box.show {
            transform: scale(1);
            opacity: 1;
        }
        .qrcode-title {
            color: #d43f3a;
            font-size: 22px;
            margin-bottom: 25px;
            font-weight: 600;
            animation: titlePulse 2s ease-in-out infinite alternate;
        }
        .qrcode-img {
            width: 80%;
            max-width: 300px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        .qrcode-img:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        /* åŠ è½½æç¤ºï¼ˆæ–°å¢ï¼‰ */
        .loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 999;
            color: #d43f3a;
            font-size: 20px;
            display: none;
        }

        /* çŒ«å’ªæ—¶é’Ÿæ ·å¼ */
        .cat-clock-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 100px;
            height: 100px;
            z-index: 998;
            transition: all 0.3s ease;
        }
        .cat-clock {
            width: 100%;
            height: 100%;
            background: url('https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/36ffbf0d37d24f86b4562ef6603ee28c.png~tplv-a9rns2rl98-image.png?lk3s=8e244e95&rcl=2026020615513656B388305A58700ECBB4&rrcfp=dafada99&x-expires=2086588296&x-signature=eTUWmC4DucHEKon3zQE7ep9fmeI%3D') center/contain no-repeat;
            display: none;
            align-items: center;
            justify-content: center;
            color: #d43f3a;
            font-weight: bold;
            font-size: 12px;
            background-color: rgba(255,255,255,0.8);
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .cat-clock-container:hover .cat-clock {
            display: flex;
        }

        /* å½©è›‹å¼¹çª—æ ·å¼ */
        .egg-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            background: rgba(255,255,255,0.95);
            padding: 30px 40px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(255,107,139,0.4);
            text-align: center;
            display: none;
            animation: popupShow 0.5s ease-in-out;
        }
        @keyframes popupShow {
            from { opacity: 0; transform: translate(-50%, -60%); }
            to { opacity: 1; transform: translate(-50%, -50%); }
        }
        .egg-text {
            color: #d43f3a;
            font-size: 20px;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        /* ä¸´æ—¶éŸ³é¢‘æ§ä»¶æ ·å¼ */
        .temp-audio {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 999;
            background: white;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        /* å“åº”å¼ä¼˜åŒ–ï¼ˆè¦†ç›–æ›´å¤šå°ºå¯¸ï¼‰ */
        @media (max-width: 480px) {
            .card-title { font-size: 24px; }
            .friend-name { font-size: 20px; }
            .blessing-content { font-size: 16px; }
            .quiz-question { font-size: 20px; }
            .quiz-input { font-size: 16px; padding: 10px 15px; }
            .submit-btn { font-size: 16px; padding: 8px 25px; }
            .qrcode-title { font-size: 20px; }
            .blessing-card, .quiz-box, .qrcode-box { padding: 30px 20px; }
            .hint-img { max-width: 150px; }
            .hint-qrcode { max-width: 120px; }
            .cat-clock-container {
                width: 80px;
                height: 80px;
                bottom: 15px;
                right: 15px;
            }
            .egg-text { font-size: 18px; }
            .temp-audio {
                width: 90%;
                bottom: 15px;
            }
        }
        @media (max-width: 375px) {
            .card-title { font-size: 22px; }
            .friend-name { font-size: 18px; }
            .blessing-content { font-size: 15px; line-height: 1.6; }
            .start-btn { padding: 10px 30px; font-size: 16px; }
        }
        @media (orientation: landscape) and (max-height: 500px) {
            .main-box { gap: 10px; }
            .blessing-card, .quiz-box, .qrcode-box { padding: 20px 15px; }
            .card-title { margin-bottom: 10px; }
            .friend-name { margin-bottom: 15px; }
            .blessing-content { margin-bottom: 20px; }
        }
    </style>
</head>
<body>
    <!-- åŠ è½½æç¤ºï¼ˆæ–°å¢ï¼‰ -->
    <div class="loading" id="loading">åŠ è½½ä¸­... ğŸ§¨</div>

    <!-- çŒ«å’ªæ—¶é’Ÿå®¹å™¨ -->
    <div class="cat-clock-container">
        <div class="cat-clock" id="catClock"></div>
    </div>

    <!-- å½©è›‹å¼¹çª— -->
    <div class="egg-popup" id="eggPopup">
        <div class="egg-text">å½“å½“å½“ï¼Œè¿™ä¸ªç½‘é¡µæ‰“å¼€è¿™ä¹ˆä¹…å•Šï¼Œæ­å–œä½ è§¦å‘äº†å½©è›‹å•¦</div>
        <audio controls id="eggAudio" style="display: none;">
            <source src="https://music.163.com/song/media/outer/url?id=4872514.mp3" type="audio/mpeg">
            æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾
        </audio>
    </div>

    <!-- æˆ‘çˆ±ä½ è¯­éŸ³ - ä¿®æ”¹classå’Œæ ·å¼ -->
    <audio controls id="loveAudio" class="temp-audio" style="display: none;">
        <source src="https://music.163.com/song/media/outer/url?id=4872514.mp3" type="audio/mpeg">
        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾
    </audio>

    <!-- ä¸»å®¹å™¨ï¼šç»å¯¹å±…ä¸­ï¼ŒåŒ…è£¹æ‰€æœ‰å†…å®¹ -->
    <div class="main-box">
        <!-- ç¥ç¦å¡ç‰‡ï¼ˆç‚¹å‡»æ§éŸ³ä¹ï¼Œç­”é¢˜æ—¶éšè—ï¼‰ -->
        <div class="blessing-card" id="blessingCard">
            <h1 class="card-title">
                <span class="lantern-icon">ğŸ®</span>
                æ–°æ˜¥å¿«ä¹
                <span class="lantern-icon">ğŸ®</span>
            </h1>
            <h2 class="friend-name">æ±Ÿæ½‡å¤§ç¬¨è›‹</h2>
            <p class="blessing-content">
                è½¬çœ¼åˆåˆ°æ–°å¹´ï¼Œéš”ç€å±±æµ·ï¼Œä¹ŸæŒ¡ä¸ä½å¯¹ä½ çš„ç‰µæŒ‚ï½<br>
                æ–°å¹´å¿«ä¹ï¼Œæ„¿æ–°å¹´çš„é£ï¼Œå¹æ•£æ—§å²çš„å°˜ã€‚
                2026ï¼Œä¿æŒçƒ­çˆ±ï¼Œå¥”èµ´å±±æµ·ï¼Œé©¬åˆ°æˆåŠŸï¼Œä¸‡äº‹é¡ºæ„ã€‚âœ¨ï½
            </p>
        </div>

        <!-- å¼€å§‹ç­”é¢˜æŒ‰é’® -->
        <button class="start-btn" id="startBtn">å¼€å§‹ç­”é¢˜</button>

        <!-- ç­”é¢˜åŒºåŸŸï¼ˆå±…ä¸­æ˜¾ç¤ºï¼Œé»˜è®¤éšè—ï¼‰ -->
        <div class="quiz-box" id="quizBox">
            <div class="quiz-question" id="quizQuestion"></div>
            <!-- æ–‡æœ¬è¾“å…¥æ¡† -->
            <input type="text" class="quiz-input" id="quizInput" placeholder="è¯·è¾“å…¥ç­”æ¡ˆ...">
            <button class="submit-btn" id="submitBtn">æäº¤ç­”æ¡ˆ </button>
            <div class="quiz-tip" id="quizTip">ç­”é”™å•¦ï¼Œå†æƒ³æƒ³ï½ ğŸ˜œ</div>
            <!-- æç¤ºå†…å®¹åŒºåŸŸ -->
            <div class="hint-content" id="hintContent"></div>
        </div>

        <!-- äºŒç»´ç /å›¾ç‰‡å±•ç¤ºåŒºï¼ˆå±…ä¸­æ˜¾ç¤ºï¼Œé»˜è®¤éšè—ï¼‰ -->
        <div class="qrcode-box" id="qrcodeBox">
            <h3 class="qrcode-title">ğŸ‰ ç­”å¯¹å•¦ï¼ä¸“å±æ–°å¹´æƒŠå–œ</h3>
            <!-- ã€éœ€ä¿®æ”¹ã€‘æ›¿æ¢æˆä½ çš„äºŒç»´ç /å›¾ç‰‡é“¾æ¥ -->
            <img src="https://img-blog.csdnimg.cn/20240120152218999.png" alt="æ–°å¹´æƒŠå–œäºŒç»´ç " class="qrcode-img" loading="lazy">
        </div>
    </div>

    <!-- èƒŒæ™¯éŸ³ä¹ï¼ˆä¼˜åŒ–åŠ è½½ï¼‰ -->
    <audio preload="metadata" loop muted id="bg-music">
        <source src="https://music.163.com/song/media/outer/url?id=4872514.mp3" type="audio/mpeg">
    </audio>

    <script>
        // â€”â€”â€”â€” ã€éœ€ä¿®æ”¹ã€‘ç¬¬ä¸€æ­¥ï¼šè‡ªå®šä¹‰ç­”é¢˜å†…å®¹ï¼ˆæ ¸å¿ƒï¼‰â€”â€”â€”â€”
        const quizList = [
            {
                question: "æˆ‘æƒ³ç¥ä½ æ–°å¹´ä»€ä¹ˆï¼Ÿ",
                answer: "å¹³å®‰å–œä¹",
                errorCount: 0,
                maxError: 1,
                hintType: "text",
                hintContent: "ç­”æ¡ˆæ˜¯ï¼šå¹³å®‰å–œä¹"
            },
            {
                question: "æˆ‘çš„ç”Ÿæ—¥æ˜¯ï¼Ÿ",
                answer: "0619",
                errorCount: 0,
                maxError: 2,
                hintType: "text",
                hintContent: "æˆ‘çš„ç”Ÿæ—¥éƒ½ä¸è®°å¾—å•¦ï¼Ÿ0619"
            },
            {
                question: "æœ€å–œæ¬¢çš„é¢œè‰²æ˜¯ï¼Ÿ",
                answer: "ä¸çŸ¥é“",
                errorCount: 0,
                maxError: 3,
                hintType: "qrcode",
                hintContent: "https://p6-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/9c360b9ba17a42f7a42cd91fa84d875e.png~tplv-a9rns2rl98-image.png?lk3s=8e244e95&rcl=2026021117284549161C2F5D81B526B724&rrcfp=dafada99&x-expires=2087026125&x-signature=cCP5pt9GONLq%2B4Z7EpdK%2F0evYMw%3D" 
            },
            {
                question: "æˆ‘å¯¹äºä½ ç®—æ˜¯ä»€ä¹ˆæ ·çš„å­˜åœ¨ï¼Ÿ",
                answer: "ç³–æœ",
                errorCount: 0,
                maxError: 4,
            },
            {
                question: "æˆ‘çš„æ¸¸æˆåï¼Ÿ",
                answer: "å¢¨èŒ¶",
                errorCount: 0,
                maxError: 5,
            }
        ];

        // â€”â€”â€”â€” ç¬¬äºŒæ­¥ï¼šè·å–é¡µé¢å…ƒç´  + æ€§èƒ½ä¼˜åŒ– â€”â€”â€”â€”
        const dom = {
            blessingCard: document.getElementById('blessingCard'),
            startBtn: document.getElementById('startBtn'),
            quizBox: document.getElementById('quizBox'),
            quizQuestion: document.getElementById('quizQuestion'),
            quizInput: document.getElementById('quizInput'),
            submitBtn: document.getElementById('submitBtn'),
            quizTip: document.getElementById('quizTip'),
            hintContent: document.getElementById('hintContent'),
            qrcodeBox: document.getElementById('qrcodeBox'),
            card: document.querySelector('.blessing-card'),
            music: document.getElementById('bg-music'),
            loading: document.getElementById('loading'),
            catClock: document.getElementById('catClock'),
            eggPopup: document.getElementById('eggPopup'),
            eggAudio: document.getElementById('eggAudio'),
            loveAudio: document.getElementById('loveAudio'),
            mainBox: document.querySelector('.main-box') // æ–°å¢ï¼šä¸»å†…å®¹å®¹å™¨
        };
        let currentQ = 0; // å½“å‰ç­”é¢˜ç´¢å¼•
        let isMusicOn = false; // éŸ³ä¹çŠ¶æ€
        let snowCreated = false; // é›ªèŠ±åˆ›å»ºæ ‡è®°ï¼ˆé¿å…é‡å¤åˆ›å»ºï¼‰
        let isLoveEggActive = false; // çˆ±å¿ƒå½©è›‹æ¿€æ´»æ ‡è®°
        let eggPopupTimer = null; // å½©è›‹å¼¹çª—å®šæ—¶å™¨ï¼ˆæ–°å¢ï¼‰
        let currentShowElement = 'blessingCard'; // æ–°å¢ï¼šè®°å½•å½“å‰æ˜¾ç¤ºçš„ç•Œé¢ï¼ˆé»˜è®¤è´ºå¡ï¼‰

        // â€”â€”â€”â€” æ–°å¢ï¼šé¡µé¢è®¡æ—¶é€»è¾‘ â€”â€”â€”â€”
        let pageOpenTime = Date.now(); // è®°å½•é¡µé¢æ‰“å¼€çš„æ—¶é—´æˆ³
        let timerInterval; // è®¡æ—¶å™¨å®šæ—¶å™¨

        // æ ¼å¼åŒ–æ—¶é—´ä¸º åˆ†:ç§’ï¼ˆè¡¥é›¶ï¼‰
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        // æ›´æ–°çŒ«å’ªæ—¶é’Ÿæ˜¾ç¤ºçš„è®¡æ—¶
        function updateCatClock() {
            const now = Date.now();
            const elapsedSeconds = (now - pageOpenTime) / 1000;
            dom.catClock.textContent = formatTime(elapsedSeconds);
            
            // ç¤ºä¾‹ï¼šé¡µé¢æ‰“å¼€è¶…è¿‡320ç§’è§¦å‘å½©è›‹ï¼ˆå¯è‡ªå®šä¹‰è§¦å‘æ¡ä»¶ï¼‰
            if (elapsedSeconds >= 320 && !dom.eggPopup.style.display) {
                showEggPopup();
            }
        }

        // å¯åŠ¨é¡µé¢è®¡æ—¶ï¼ˆé¡µé¢åŠ è½½åç«‹å³æ‰§è¡Œï¼‰
        function startPageTimer() {
            // ç«‹å³æ›´æ–°ä¸€æ¬¡
            updateCatClock();
            // æ¯ç§’æ›´æ–°ä¸€æ¬¡
            timerInterval = setInterval(updateCatClock, 1000);
        }

        // â€”â€”â€”â€” æ–°å¢ï¼šæ˜¾ç¤ºå½©è›‹å¼¹çª—å¹¶éšè—å½“å‰ç•Œé¢ â€”â€”â€”â€”
        function showEggPopup() {
            // 1. è®°å½•å½“å‰æ˜¾ç¤ºçš„ç•Œé¢
            if (dom.quizBox.classList.contains('show')) {
                currentShowElement = 'quizBox';
            } else if (dom.qrcodeBox.classList.contains('show')) {
                currentShowElement = 'qrcodeBox';
            } else {
                currentShowElement = 'blessingCard';
            }

            // 2. éšè—ä¸»å†…å®¹å®¹å™¨ï¼ˆæ‰€æœ‰ç•Œé¢ç»Ÿä¸€éšè—ï¼‰
            dom.mainBox.style.display = 'none';

            // 3. æ˜¾ç¤ºå½©è›‹å¼¹çª—
            dom.eggPopup.style.display = 'block';
            // æ’­æ”¾å½©è›‹éŸ³é¢‘ï¼ˆå¤„ç†è‡ªåŠ¨æ’­æ”¾é™åˆ¶ï¼‰
            dom.eggAudio.play().catch(err => {
                console.log('å½©è›‹éŸ³é¢‘è‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼Œæ˜¾ç¤ºæ§ä»¶:', err);
                dom.eggAudio.style.display = 'block';
            });

            // 4. 30ç§’åå…³é—­å¼¹çª—å¹¶æ¢å¤åŸç•Œé¢
            clearTimeout(eggPopupTimer); // æ¸…é™¤æ—§å®šæ—¶å™¨ï¼ˆé¿å…é‡å¤ï¼‰
            eggPopupTimer = setTimeout(() => {
                hideEggPopup();
            }, 30000); // 30ç§’ = 30000æ¯«ç§’
        }

        // â€”â€”â€”â€” æ–°å¢ï¼šéšè—å½©è›‹å¼¹çª—å¹¶æ¢å¤åŸç•Œé¢ â€”â€”â€”â€”
        function hideEggPopup() {
            // 1. éšè—å½©è›‹å¼¹çª—
            dom.eggPopup.style.display = 'none';
            dom.eggAudio.style.display = 'none';
            dom.eggAudio.pause();
            dom.eggAudio.currentTime = 0;

            // 2. æ¢å¤ä¸»å†…å®¹å®¹å™¨æ˜¾ç¤º
            dom.mainBox.style.display = 'flex';

            // 3. æ¢å¤ä¹‹å‰æ˜¾ç¤ºçš„ç•Œé¢
            switch (currentShowElement) {
                case 'blessingCard':
                    dom.blessingCard.style.display = 'block';
                    dom.startBtn.style.display = 'block';
                    dom.quizBox.style.display = 'none';
                    dom.qrcodeBox.style.display = 'none';
                    break;
                case 'quizBox':
                    dom.blessingCard.style.display = 'none';
                    dom.startBtn.style.display = 'none';
                    dom.quizBox.style.display = 'block';
                    dom.quizBox.classList.add('show');
                    dom.qrcodeBox.style.display = 'none';
                    break;
                case 'qrcodeBox':
                    dom.blessingCard.style.display = 'none';
                    dom.startBtn.style.display = 'none';
                    dom.quizBox.style.display = 'none';
                    dom.qrcodeBox.style.display = 'block';
                    dom.qrcodeBox.classList.add('show');
                    break;
            }

            // æ¸…é™¤å®šæ—¶å™¨
            clearTimeout(eggPopupTimer);
        }

        // â€”â€”â€”â€” ç¬¬ä¸‰æ­¥ï¼šé›ªèŠ±é£˜è½æ•ˆæœï¼ˆä¸è§„åˆ™é›ªèŠ±å½¢çŠ¶ï¼‰â€”â€”â€”â€”
        function createSnowflakes() {
            if (snowCreated) return; // é¿å…é‡å¤åˆ›å»º
            dom.loading.style.display = 'block'; // æ˜¾ç¤ºåŠ è½½æç¤º
            
            // å¼‚æ­¥åˆ›å»ºé›ªèŠ±ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹
            setTimeout(() => {
                const snowCount = window.innerWidth > 768 ? 120 : 80; // å¤§å±å¤šé›ªèŠ±
                const body = document.body;
                
                // æ‰¹é‡åˆ›å»ºé›ªèŠ±ï¼ˆå‡å°‘DOMæ“ä½œï¼‰
                let snowHTML = '';
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes snowFall {
                        from { transform: translateY(0) rotate(0deg); }
                        to { transform: translateY(100vh) rotate(360deg); }
                    }
                `;
                document.head.appendChild(style);

                for (let i = 0; i < snowCount; i++) {
                    // ä¸è§„åˆ™é›ªèŠ±å°ºå¯¸
                    const size = Math.random() * 10 + 3;
                    const left = Math.random() * 100;
                    const animationDuration = Math.random() * 10 + 10;
                    const delay = Math.random() * 20;
                    const opacity = Math.random() * 0.7 + 0.3;
                    // éšæœºé›ªèŠ±æ—‹è½¬è§’åº¦
                    const rotate = Math.random() * 360;
                    
                    snowHTML += `
                        <div class="snowflake" style="
                            width: ${size}px;
                            height: ${size}px;
                            left: ${left}vw;
                            animation: snowFall ${animationDuration}s linear ${delay}s infinite;
                            opacity: ${opacity};
                            background: white;
                            transform: rotate(${rotate}deg);
                        "></div>
                    `;
                }
                
                body.insertAdjacentHTML('beforeend', snowHTML);
                snowCreated = true;
                dom.loading.style.display = 'none'; // éšè—åŠ è½½æç¤º
            }, 100);
        }

        // â€”â€”â€”â€” çˆ±å¿ƒä¸Šæµ®æ•ˆæœï¼ˆä¿®å¤ï¼šç¡®ä¿ä¸€å®šä¼šæ‰§è¡Œï¼‰â€”â€”â€”â€”
        function createHearts() {
            // é‡ç½®æ ‡è®°ï¼Œç¡®ä¿æ¯æ¬¡éƒ½èƒ½åˆ›å»º
            isLoveEggActive = false;
            
            const heartCount = window.innerWidth > 768 ? 200 : 120;
            const body = document.body;
            
            // å…ˆæ¸…é™¤å¯èƒ½æ®‹ç•™çš„çˆ±å¿ƒ
            const oldHearts = document.querySelectorAll('.heart');
            oldHearts.forEach(heart => heart.remove());
            
            // æ‰¹é‡åˆ›å»ºçˆ±å¿ƒ
            for (let i = 0; i < heartCount; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                
                // éšæœºä½ç½®å’ŒåŠ¨ç”»å‚æ•°
                const left = Math.random() * 100;
                const animationDuration = Math.random() * 8 + 5;
                const delay = Math.random() * 3;
                const sizeScale = Math.random() * 0.8 + 0.5; // 0.5-1.3å€å¤§å°
                
                heart.style.left = `${left}vw`;
                heart.style.animationDuration = `${animationDuration}s`;
                heart.style.animationDelay = `${delay}s`;
                heart.style.transform = `rotate(45deg) scale(${sizeScale})`;
                
                // çˆ±å¿ƒé¢œè‰²å˜åŒ–ï¼ˆæ·±æµ…ç²‰è‰²ï¼‰
                const hue = 340 + Math.random() * 10; // ç²‰è‰²ç³»
                const saturation = 80 + Math.random() * 20;
                const lightness = 60 + Math.random() * 10;
                heart.style.background = `hsl(${hue}, ${saturation}%, ${lightness}%)`;
                
                body.appendChild(heart);
                
                // åŠ¨ç”»ç»“æŸåç§»é™¤çˆ±å¿ƒ
                setTimeout(() => {
                    try {
                        heart.remove();
                    } catch (e) {
                        console.log('ç§»é™¤çˆ±å¿ƒå…ƒç´ æ—¶å‡ºé”™:', e);
                    }
                    if (i === heartCount - 1) {
                        isLoveEggActive = false;
                    }
                }, (animationDuration + delay) * 1000);
            }
            
            isLoveEggActive = true;
        }

        // â€”â€”â€”â€” ç¬¬å››æ­¥ï¼šç‰¹æ•ˆå‡½æ•°ï¼ˆå¢å¼º+æ€§èƒ½ä¼˜åŒ–ï¼‰â€”â€”â€”â€”
        // 4.1 ç­”å¯¹ç¤¼èŠ±ç‰¹æ•ˆï¼ˆä¼˜åŒ–æ€§èƒ½ï¼‰
        function createFirework() {
            const fireworkCount = window.innerWidth > 768 ? 150 : 80; // å¤§å±å¤šç¤¼èŠ±
            const body = document.body;
            const colors = ['#ff6b8b', '#d43f3a', '#ffd700', '#32cd32', '#1e90ff', '#ff69b4'];
            
            // æ‰¹é‡åˆ›å»ºç¤¼èŠ±
            let fireworkHTML = '';
            for (let i = 0; i < fireworkCount; i++) {
                const size = Math.random() * 6 + 4;
                const left = Math.random() * 100;
                const top = Math.random() * 100;
                const color = colors[Math.floor(Math.random() * colors.length)];
                
                fireworkHTML += `
                    <div class="firework" style="
                        width: ${size}px;
                        height: ${size}px;
                        left: ${left}vw;
                        top: ${top}vh;
                        color: ${color};
                    "></div>
                `;
            }
            
            body.insertAdjacentHTML('beforeend', fireworkHTML);
            
            // æ‰¹é‡ç§»é™¤ç¤¼èŠ±ï¼ˆå‡å°‘å®šæ—¶å™¨æ•°é‡ï¼‰
            setTimeout(() => {
                const fireworks = document.querySelectorAll('.firework');
                fireworks.forEach(fw => fw.remove());
            }, 1000);
        }

        // 4.2 ç­”é”™æŠ–åŠ¨ç‰¹æ•ˆï¼ˆä¼˜åŒ–ï¼‰
        function shakeQuizBox() {
            dom.quizBox.classList.add('shake');
            setTimeout(() => dom.quizBox.classList.remove('shake'), 300);
        }

        // 4.3 æ˜¾ç¤ºæç¤ºå†…å®¹
        function showHint() {
            const currentQuiz = quizList[currentQ];
            let hintHTML = '';
            
            switch(currentQuiz.hintType) {
                case 'text':
                    hintHTML = `<p style="color: #d43f3a; font-size: 16px;">${currentQuiz.hintContent}</p>`;
                    break;
                case 'image':
                    hintHTML = `<img src="${currentQuiz.hintContent}" alt="æç¤ºå›¾ç‰‡" class="hint-img">`;
                    break;
                case 'qrcode':
                    hintHTML = `<img src="${currentQuiz.hintContent}" alt="æç¤ºäºŒç»´ç " class="hint-qrcode">
                                <p style="color: #666; font-size: 14px; margin-top: 10px;"></p>`;
                    break;
                case 'audio':
                    hintHTML = `<audio controls class="hint-audio">
                                <source src="${currentQuiz.hintContent}" type="audio/mpeg">
                                æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾
                                </audio>
                                <p style="color: #666; font-size: 14px; margin-top: 10px;">æ’­æ”¾éŸ³é¢‘è·å–ç­”æ¡ˆæç¤º</p>`;
                    break;
            }
            
            dom.hintContent.innerHTML = hintHTML;
            dom.hintContent.style.display = 'block';
        }

        // â€”â€”â€”â€” å‘é€é‚®ä»¶å‡½æ•°ï¼ˆç¬¬å››é¢˜ä¸“ç”¨ï¼‰â€”â€”â€”â€”
        function sendAnswerToEmail(answer) {
            // ä½¿ç”¨EmailJSæˆ–è¡¨å•æäº¤æ–¹å¼å‘é€é‚®ä»¶
            // è¿™é‡Œä½¿ç”¨ç®€æ˜“çš„mailtoæ–¹å¼ï¼ˆå®é™…ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨åç«¯æ¥å£ï¼‰
            const subject = 'æ–°å¹´ç­”é¢˜ç¬¬å››é¢˜ç­”æ¡ˆ';
            const body = `ç¬¬å››é¢˜ç­”æ¡ˆï¼š${answer}`;
            const mailtoLink = `mailto:1090456682@qq.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            
            // å°è¯•æ‰“å¼€é‚®ä»¶å®¢æˆ·ç«¯
            window.open(mailtoLink);
            
            // å¦‚éœ€æ— ç•Œé¢å‘é€ï¼Œéœ€å¯¹æ¥åç«¯APIï¼Œç¤ºä¾‹ï¼š
            /*
            fetch('/api/send-email', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    to: '1090456682@qq.com',
                    subject: 'æ–°å¹´ç­”é¢˜ç¬¬å››é¢˜ç­”æ¡ˆ',
                    content: answer
                })
            }).then(res => res.json())
              .then(data => console.log('é‚®ä»¶å‘é€æˆåŠŸ:', data))
              .catch(err => console.error('é‚®ä»¶å‘é€å¤±è´¥:', err));
            */
        }

        // â€”â€”â€”â€” ç¬¬äº”æ­¥ï¼šåŠ è½½å½“å‰é¢˜ç›®ï¼ˆä¼˜åŒ–äº¤äº’ï¼‰â€”â€”â€”â€”
        function loadQuiz() {
            dom.quizInput.value = ''; // æ¸…ç©ºè¾“å…¥æ¡†
            dom.quizTip.style.display = 'none'; // éšè—é”™è¯¯æç¤º
            dom.hintContent.style.display = 'none'; // éšè—æç¤ºå†…å®¹
            const currentQuiz = quizList[currentQ];
            dom.quizQuestion.innerText = currentQuiz.question;
            
            // è®°å½•å½“å‰æ˜¾ç¤ºçš„æ˜¯ç­”é¢˜ç•Œé¢
            currentShowElement = 'quizBox';
            
            // ç­”é¢˜åŒºå…¥åœºåŠ¨ç”»
            dom.quizBox.classList.add('show');
        }

        // â€”â€”â€”â€” å¤„ç†æˆ‘çˆ±ä½ å½©è›‹é€»è¾‘ â€”â€”â€”â€”
        function handleLoveEgg() {
            // 1. ç«‹å³éšè—ç­”é¢˜ç•Œé¢
            dom.quizBox.style.display = 'none';
            
            // 2. å¼ºåˆ¶åˆ›å»ºçˆ±å¿ƒåŠ¨ç”»ï¼ˆä¼˜å…ˆæ‰§è¡Œï¼‰
            createHearts();
            
            // 3. å¤„ç†è¯­éŸ³æ’­æ”¾ - ä¿®å¤æµè§ˆå™¨è‡ªåŠ¨æ’­æ”¾é™åˆ¶
            try {
                // å…ˆå°è¯•è‡ªåŠ¨æ’­æ”¾
                dom.loveAudio.play().then(() => {
                    console.log('è¯­éŸ³è‡ªåŠ¨æ’­æ”¾æˆåŠŸ');
                    dom.loveAudio.style.display = 'none'; // éšè—æ§ä»¶
                }).catch(err => {
                    console.log('è‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼Œæ˜¾ç¤ºéŸ³é¢‘æ§ä»¶:', err);
                    // æ˜¾ç¤ºéŸ³é¢‘æ§ä»¶ï¼Œè®©ç”¨æˆ·æ‰‹åŠ¨æ’­æ”¾
                    dom.loveAudio.style.display = 'block';
                    alert('ğŸµ éœ€è¦ä½ æ‰‹åŠ¨ç‚¹å‡»æ’­æ”¾è¯­éŸ³å“¦ï½\n20ç§’åç­”é¢˜ç•Œé¢ä¼šè‡ªåŠ¨æ¢å¤');
                });
            } catch (e) {
                console.error('æ’­æ”¾è¯­éŸ³å‡ºé”™:', e);
                // å³ä½¿å‡ºé”™ä¹Ÿæ˜¾ç¤ºéŸ³é¢‘æ§ä»¶
                dom.loveAudio.style.display = 'block';
            }
            
            // 4. 18ç§’åè‡ªåŠ¨æ¢å¤ç­”é¢˜ç•Œé¢
            setTimeout(() => {
                // éšè—éŸ³é¢‘æ§ä»¶
                dom.loveAudio.style.display = 'none';
                // åœæ­¢è¯­éŸ³æ’­æ”¾ï¼ˆé˜²æ­¢ç»§ç»­æ’­æ”¾ï¼‰
                try {
                    dom.loveAudio.pause();
                    dom.loveAudio.currentTime = 0;
                } catch (e) {
                    console.log('åœæ­¢éŸ³é¢‘æ—¶å‡ºé”™:', e);
                }
                // é‡æ–°æ˜¾ç¤ºç­”é¢˜ç•Œé¢
                dom.quizBox.style.display = 'block';
                loadQuiz();
            }, 18000); // 18ç§’ = 18000æ¯«ç§’
        }

        // â€”â€”â€”â€” ç¬¬å…­æ­¥ï¼šéªŒè¯ç­”æ¡ˆï¼ˆä¼˜åŒ–é€»è¾‘ï¼‰â€”â€”â€”â€”
        function checkAnswer() {
            const userAnswer = dom.quizInput.value.trim().replace(/\s+/g, '');
            
            // è°ƒè¯•ï¼šè¾“å‡ºç”¨æˆ·è¾“å…¥å†…å®¹
            console.log('ç”¨æˆ·è¾“å…¥:', userAnswer);
            
            // æ£€æŸ¥æ˜¯å¦è¾“å…¥"æˆ‘çˆ±ä½ "ï¼ˆå¢åŠ å®¹é”™ï¼‰
            if (userAnswer === 'æˆ‘çˆ±ä½ ' || userAnswer === 'æˆ‘æ„›ä½ ' || userAnswer === '520') {
                console.log('è§¦å‘æˆ‘çˆ±ä½ å½©è›‹');
                handleLoveEgg();
                return; // ç»ˆæ­¢åç»­ç­”é¢˜é€»è¾‘ï¼Œå…ˆå¤„ç†å½©è›‹
            }
            
            const currentQuiz = quizList[currentQ];
            
            // ç¬¬å››é¢˜ç‰¹æ®Šå¤„ç†ï¼šæ— è®ºç­”æ¡ˆæ˜¯ä»€ä¹ˆéƒ½æ­£ç¡®ï¼Œå¹¶å‘é€é‚®ä»¶
            if (currentQ === 3) { // ç¬¬å››é¢˜ç´¢å¼•ä¸º3
                sendAnswerToEmail(userAnswer);
                createFirework(); // ç¤¼èŠ±ç‰¹æ•ˆ
                if (currentQ === quizList.length - 1) {
                    setTimeout(() => {
                        dom.quizBox.style.display = 'none';
                        dom.qrcodeBox.style.display = 'block';
                        // è®°å½•å½“å‰æ˜¾ç¤ºçš„æ˜¯äºŒç»´ç ç•Œé¢
                        currentShowElement = 'qrcodeBox';
                        setTimeout(() => dom.qrcodeBox.classList.add('show'), 50);
                    }, 500);
                } else {
                    currentQ++;
                    loadQuiz();
                }
                return;
            }

            // æ™®é€šç­”é¢˜é€»è¾‘
            if (userAnswer === currentQuiz.answer) {
                createFirework(); // ç¤¼èŠ±ç‰¹æ•ˆ
                if (currentQ === quizList.length - 1) {
                    // æœ€åä¸€é¢˜ç­”å¯¹ï¼Œæ˜¾ç¤ºäºŒç»´ç 
                    setTimeout(() => {
                        dom.quizBox.style.display = 'none';
                        dom.qrcodeBox.style.display = 'block';
                        // è®°å½•å½“å‰æ˜¾ç¤ºçš„æ˜¯äºŒç»´ç ç•Œé¢
                        currentShowElement = 'qrcodeBox';
                        setTimeout(() => dom.qrcodeBox.classList.add('show'), 50);
                    }, 500);
                } else {
                    // è¿›å…¥ä¸‹ä¸€é¢˜
                    currentQ++;
                    loadQuiz();
                }
            } else {
                // ç­”é”™é€»è¾‘
                currentQuiz.errorCount++;
                shakeQuizBox(); // æŠ–åŠ¨ç‰¹æ•ˆ
                dom.quizTip.style.display = 'block';
                
                // è¾¾åˆ°æœ€å¤§é”™è¯¯æ¬¡æ•°æ˜¾ç¤ºæç¤º
                if (currentQuiz.errorCount >= currentQuiz.maxError) {
                    showHint();
                }
            }
        }

        // â€”â€”â€”â€” ç¬¬ä¸ƒæ­¥ï¼šäº‹ä»¶ç»‘å®šï¼ˆä¼˜åŒ–+å…¼å®¹ï¼‰â€”â€”â€”â€”
        // 7.1 å¼€å§‹ç­”é¢˜æŒ‰é’®
        dom.startBtn.addEventListener('click', () => {
            dom.blessingCard.style.display = 'none';
            dom.startBtn.style.display = 'none';
            dom.quizBox.style.display = 'block';
            // è®°å½•å½“å‰æ˜¾ç¤ºçš„æ˜¯ç­”é¢˜ç•Œé¢
            currentShowElement = 'quizBox';
            loadQuiz();
            // é¦–æ¬¡ç‚¹å‡»åˆ›å»ºé›ªèŠ±ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰
            if (!snowCreated) createSnowflakes();
        });

        // 7.2 æäº¤ç­”æ¡ˆæŒ‰é’®
        dom.submitBtn.addEventListener('click', checkAnswer);

        // 7.3 å›è½¦æäº¤ç­”æ¡ˆ
        dom.quizInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') checkAnswer();
        });

        // 7.4 è´ºå¡ç‚¹å‡»æ’­æ”¾éŸ³ä¹ï¼ˆä¿®å¤è‡ªåŠ¨æ’­æ”¾é™åˆ¶ï¼‰
        dom.blessingCard.addEventListener('click', () => {
            if (!isMusicOn) {
                // å¤„ç†æµè§ˆå™¨è‡ªåŠ¨æ’­æ”¾ç­–ç•¥
                dom.music.muted = false;
                dom.music.play().catch(err => {
                    console.log('éŸ³ä¹è‡ªåŠ¨æ’­æ”¾å¤±è´¥:', err);
                    alert('ğŸµ éœ€è¦ä½ æ‰‹åŠ¨å…è®¸éŸ³é¢‘æ’­æ”¾å“¦ï½');
                    dom.music.muted = false;
                });
                isMusicOn = true;
                // ç‚¹å‡»è´ºå¡åˆ›å»ºé›ªèŠ±ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰
                if (!snowCreated) createSnowflakes();
            }
        });

        // â€”â€”â€”â€” åˆå§‹åŒ– â€”â€”â€”â€”
        window.addEventListener('load', () => {
            startPageTimer(); // å¯åŠ¨é¡µé¢è®¡æ—¶
            // é¢„åŠ è½½é›ªèŠ±ï¼ˆå¯é€‰ï¼Œæ ¹æ®éœ€æ±‚ï¼‰
            // setTimeout(createSnowflakes, 1000);
        });

        // é˜²æ­¢é¡µé¢å¸è½½æ—¶å®šæ—¶å™¨æ®‹ç•™
        window.addEventListener('beforeunload', () => {
            clearInterval(timerInterval);
            clearTimeout(eggPopupTimer);
        });
    </script>
</body>
</html>